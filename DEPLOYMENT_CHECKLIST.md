# Deployment Checklist for Verified Financial Data AI System

## Pre-Deployment Setup

### 1. Database Setup
- [ ] Install PostgreSQL (version 12+ recommended)
- [ ] Create database: `CREATE DATABASE vfis_db;`
- [ ] Create user with appropriate permissions
- [ ] Configure `.env` file with database credentials:
  ```
  DB_HOST=localhost
  DB_PORT=5432
  DB_NAME=vfis_db
  DB_USER=postgres
  DB_PASSWORD=Alpha123
  ```

### 2. Python Environment
- [ ] Install Python 3.10 or higher
- [ ] Create virtual environment: `python -m venv venv`
- [ ] Activate virtual environment
- [ ] Install dependencies: `pip install -r requirements.txt`

### 3. Database Initialization
- [ ] Run initialization script: `python scripts/init_database.py`
- [ ] Verify tables are created successfully
- [ ] Verify Zomato company entry is created
- [ ] Verify data sources (NSE, BSE, SEBI) are configured

### 4. Data Population

#### Zomato Financial Data Requirements:
- [ ] **Quarterly Reports**: Populate Q1 2022 through Q2 FY 2026
- [ ] **Annual Reports**: Populate 2021, 2022, 2023, 2024
- [ ] **Balance Sheet Data**: For all quarterly and annual reports
- [ ] **Income Statement Data**: For all quarterly and annual reports
- [ ] **Cash Flow Statement Data**: For all quarterly and annual reports
- [ ] **Data Sources**: All data must reference NSE, BSE, or SEBI only
- [ ] **As-of Dates**: All metrics must have accurate as-of dates
- [ ] **Source Attribution**: All data must reference valid data_source_id

#### Data Quality Checks:
- [ ] Verify all data sources are NSE, BSE, or SEBI only
- [ ] Verify fiscal year dates are correct (Indian FY: April to March)
- [ ] Verify quarter assignments (Q1: Apr-Jun, Q2: Jul-Sep, Q3: Oct-Dec, Q4: Jan-Mar)
- [ ] Verify as-of dates match report dates
- [ ] Verify no NULL values in critical metrics

### 5. Configuration Verification
- [ ] Verify `.env` file is in project root
- [ ] Verify `OPENAI_API_KEY` is set (for LLM operations)
- [ ] Verify database credentials are correct
- [ ] Verify `data_staleness_threshold_days` is set appropriately (default: 90)

### 6. Testing

#### Unit Tests:
- [ ] Test database connection
- [ ] Test data retrieval functions
- [ ] Test source validation
- [ ] Test staleness detection
- [ ] Test audit logging

#### Integration Tests:
- [ ] Test full workflow with comapny or stock ticker
- [ ] Verify LLM does not generate financial numbers
- [ ] Verify all data includes source attribution
- [ ] Verify all data includes as-of dates
- [ ] Verify staleness warnings appear when appropriate
- [ ] Verify audit logs are created for all operations

#### Data Validation Tests:
- [ ] Test with missing data (should return explicit error)
- [ ] Test with stale data (should include warning)
- [ ] Test with invalid ticker (should return error)
- [ ] Test with invalid data source (should be rejected)

### 7. Security Checklist
- [ ] Database credentials are in `.env` (not in code)
- [ ] `.env` file is in `.gitignore`
- [ ] Database user has minimal required permissions
- [ ] Connection pool size is appropriate (default: 10 max)
- [ ] Audit logging is enabled and working

### 8. Monitoring Setup
- [ ] Set up monitoring for database connections
- [ ] Set up monitoring for audit logs
- [ ] Set up alerts for database connection failures
- [ ] Set up alerts for data staleness warnings
- [ ] Set up monitoring for LLM API usage

## Post-Deployment

### 9. Production Verification
- [ ] Run sample query: `python main.py`
- [ ] Verify system returns data for ZOMATO
- [ ] Verify all output includes source attribution
- [ ] Verify audit logs are being written
- [ ] Verify no financial numbers are generated by LLM

### 10. Documentation
- [ ] Review README_VFIS.md
- [ ] Review REFACTORING_SUMMARY.md
- [ ] Document any custom configurations
- [ ] Document data update procedures

## Maintenance

### Regular Tasks
- [ ] Update financial data as new reports are filed
- [ ] Monitor audit logs for anomalies
- [ ] Review data staleness warnings
- [ ] Backup database regularly
- [ ] Review and clean up old audit logs (if needed)

### Data Updates
When new financial data is available:
1. Verify data source is NSE, BSE, or SEBI
2. Insert into appropriate tables (annual_reports or quarterly_reports)
3. Insert metrics into balance_sheet, income_statement, or cashflow_statement
4. Ensure data_source_id references valid source
5. Verify as-of dates are accurate
6. Test data retrieval after insertion

## Troubleshooting

### Common Issues

**Database Connection Errors:**
- Verify PostgreSQL is running
- Verify credentials in `.env` are correct
- Verify database exists
- Check firewall settings

**No Data Available Errors:**
- Verify data has been populated
- Check company ticker symbol is correct (ZOMATO)
- Verify data_source_id references valid source

**Staleness Warnings:**
- This is expected behavior
- Update data if it's actually stale
- Adjust threshold if needed in config

**LLM Generating Numbers:**
- Review agent prompts
- Verify tools are returning data correctly
- Check audit logs for tool calls

## Support

For issues or questions:
1. Check audit logs for errors
2. Review database logs
3. Check LLM API logs
4. Review REFACTORING_SUMMARY.md for architecture details

